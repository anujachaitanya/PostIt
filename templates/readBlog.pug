include ./lib/lib.pug

doctype html
head
  meta(charset='UTF-8')
  link(rel='stylesheet' href='/css/editor.css')
  link(rel='stylesheet' href='/css/readBlog.css')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title Blog
  script(src='https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest')
  script(src='https://cdn.jsdelivr.net/npm/@editorjs/header@latest')
  script(src='https://cdn.jsdelivr.net/npm/@editorjs/list@latest')
  script(src='https://cdn.jsdelivr.net/npm/@editorjs/paragraph@latest')
  script(src='/js/readBlog.js')

body(onload=`render(${post.content})`)
+generateMenuBar(avatarUrl)
#post
  #title=post.title
  .user
    img#user-profile(src=post.avatarUrl)
    div.userInfo
      a.author_url(href=`/profile/${post.userId}`)#name=post.username
      #date=new Date(post.lastModified).toDateString()
  img.cover-image(src=`/coverImage/${coverImage}`)
  #editorjs
  .tags 
    each tag in tags
      span.added-tag=tag
  .user-actions
    .clap-action
      if(clap.isClapped)
        img#clap(src="/images/clapBlack.svg" alt="Clap" onclick=`clapOnPost(${post.id})`)
      if(clap.isClapped == false)
        img#clap(src="/images/clapWhite.svg" alt="Clap" onclick=`clapOnPost(${post.id})`)
      if(clap.isClapped == null)
        img#clap.unavailable(src="/images/clapWhite.svg" alt="Clap" )
      span#clapCount=clap.clapsCount
    a(href=`/comments/${post.id}`) 
      button.user-action Comments
